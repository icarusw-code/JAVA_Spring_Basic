## 단축키

------

생성자(Generate): Ctrl + N

에러 수정: Arlt + Enter

스마트 완성: Ctrl + Shift + Enter

Extract / Introduce : Ctrl + Art + V

오류난곳 확인: F2

테스트 생성: Ctrl + Shift  + t

히스토리 보기: Ctrl + e



## 내용 정리

------

### 클라이언트 코드의 의존관계 수정

- 클라이언트 코드인 (OrderServiceImpl) 은 (DiscountPolicy)의 인터페이스 뿐만 아니라 구체 클래스도 의존하고 있음

  **DIP 위반** - 추상에만 의존하도록 변경(인터페이스에만 의존)

변경 전

```java
public class OrderServiceImpl implements OrderService{
    private final DiscountPolicy discountPolicy  = new RateDsicountPolicy();
}
```

변경 후

```java
public class OrderServiceImpl implements OrderService{
    private DiscountPolicy discountPolicy;
}
```

구현 객체의 생성을 다른곳에 맡기도록 한다.



### **관심사의 분리** 

- **배우**는 본인의 역할인 배역을 수행하는 것에만 집중하면 된다.
- **공연 기획자**는 공연을 구성하고, 배우를 섭외하고, 역할에 맞는 배우를 지정하는것에 집중하면 된다.

### AppConfig의 활용

- 애플리케이션의 전체 동작 방식을 구성(config)하기 위해, **구현 객체를 생성**하고, **연결**하는 클래스

```java
public class AppConfig{
    public OrderService orderService(){
        return new OrderServiceImpl( new MemoryMemberRepository(), new FixDiscountPolicy());
    }
}
```

- 실제 동작에 필요한 **구현 객체를 생성**한다. -->  OrderServiceImpl, MemoryMemberRepository, FixDiscountPolicy

- 생성한 객체 인스턴스의 참조(레퍼런스)를 **생성자를 통해서 인젝션 (주입(연결))**해준다. 

  OrderServiceImpl  --> MemoryMemberRepository, FixDiscountPolicy

**변경 전 OrderServiceImpl**

```java
//변경전 OrderServiceImpl
public class OrderServiceImpl implements OrderService {
 
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    .
    .
    .
}
```

**변경 후 OrderServiceImpl**

```java
//변경된 OrderServiceImpl
public class OrderServiceImpl implements OrderService {
 
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
    }
    .
    .
    .
}
```

- 설계 변경으로 OrderServiceImpl은 FixDiscountPolicy를 의존하지 않는다
- 단지 DiscountPolicy 인터페이스만 의존한다.
- OrderServiceImpl 입장에서 생성자를 통해 어떤 구현 객체가 주입될지는 알 수 없다.
- OrderServiceImpl의 생성자를 통해 어떤 구현 객체를 주입할지는 외부(AppConfig) 에서 결정한다.
- OrderServiceImpl는 이제 실행에만 집중하면 된다.

AppConfig의 등장으로 애플리케이션이 크게 사용 영역과, 객체를 생성하고 구성하는 영역으로 분리되었다.

- 이점: FixDiscountPolicy를 RateDiscountPolicy로 변경해도 구성 영역만 영향을 받고, 사용 영역은 영향 받지 않는다.

![image-20220107113250558](C:\Users\CHOI\AppData\Roaming\Typora\typora-user-images\image-20220107113250558.png)

















